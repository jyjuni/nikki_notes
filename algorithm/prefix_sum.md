# 前缀和问题







## 差分问题

前缀和序列 $S_0, S_1, ..., S_n$的差分序列就是原序列$a_0, a_1, ..., a_{n-1}$, 其中 $a_i = S_{i+1} - S_i$。

> 这里$S_i$代表前$i$个数的前缀和: $S_i = a_0 + ... + a_{i-1}$

同样地，原序列$a_0, a_1, ..., a_{n-1}$的差分序列为 $b_0, b_1, ..., b_{n-1}$， 其中 $b_0 = a_0 - 0$, $b_i = a_i - a_{i-1}$。 对差分序列求前缀和，则得到原序列。

差分序列的好处是如果要对原序列的一个区间 [l, r] 上所有值加 val，原序列上要操作 r-l+1 次 (a[l .. r] + val)，在差分序列上只需要操作 2 次(b[l] + val, b[r+1] - val)。如果这种区间操作需要很多次，最后的查询只有一次的话，就非常适合在差分序列上操作。

